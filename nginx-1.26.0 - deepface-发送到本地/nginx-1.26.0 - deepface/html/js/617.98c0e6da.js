"use strict";(self["webpackChunkdeepface_front"]=self["webpackChunkdeepface_front"]||[]).push([[617],{5617:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("el-container",{staticStyle:{height:"100vh",border:"1px solid #eee"}},[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)",height:"100%"},attrs:{width:"200px"}},[t("el-menu",{attrs:{"default-openeds":["1","3"]}},[t("el-submenu",{attrs:{index:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-menu"}),e._v("班级管理")]),t("router-link",{attrs:{tag:"div",to:"classes"}},[t("el-menu-item",{attrs:{index:"1-1"}},[e._v("我的班级")])],1)],2),t("el-submenu",{attrs:{index:"3"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-s-grid"}),e._v("考勤签到")]),t("router-link",{attrs:{tag:"div",to:"attendance"}},[t("el-menu-item",{attrs:{index:"3-1"}},[e._v("开始考勤")])],1)],2)],1)],1),t("el-container",[t("el-main",{staticStyle:{height:"calc(100vh - 60px)"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addCourse}},[e._v("新增空课程")]),t("el-col",{attrs:{span:6}},[t("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:8000/student/addBatch","on-success":e.handleSuccess,"on-error":e.handleError,"on-preview":e.handlePreview,headers:e.uploadHeaders,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList,accept:".pdf"}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("批量上传学生信息")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传 PDF 文件")])],1)],1),t("el-table",{attrs:{data:e.tableData,height:"600px"}},[t("el-table-column",{attrs:{prop:"id",label:"课程id"}}),t("el-table-column",{attrs:{prop:"name",label:"课程名称"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"success"},on:{click:function(t){return e.goToCourseStudent(a.row.id,a.row.name)}}},[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{prop:"startTime",label:"开始时间"}}),t("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.changeCourse(a.row)}}},[e._v(" 修改课程 ")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(t){return e.deleteCourse(a.row.id)}}},[e._v(" 删除课程 ")])]}}])})],1),t("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.start},on:{"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"修改课程",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.courseData}},[t("el-form-item",{attrs:{label:"课程名称"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.courseData.name,callback:function(t){e.$set(e.courseData,"name",t)},expression:"courseData.name"}})],1),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期时间"},model:{value:e.courseData.startTime,callback:function(t){e.$set(e.courseData,"startTime",t)},expression:"courseData.startTime"}})],1),t("el-form-item",{attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期时间"},model:{value:e.courseData.endTime,callback:function(t){e.$set(e.courseData,"endTime",t)},expression:"courseData.endTime"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitChange}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"增加课程",visible:e.dialogFormVisible2},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[t("el-form",{attrs:{model:e.courseData}},[t("el-form-item",{attrs:{label:"课程名称"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.courseData.name,callback:function(t){e.$set(e.courseData,"name",t)},expression:"courseData.name"}})],1),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期时间"},model:{value:e.courseData.startTime,callback:function(t){e.$set(e.courseData,"startTime",t)},expression:"courseData.startTime"}})],1),t("el-form-item",{attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期时间"},model:{value:e.courseData.endTime,callback:function(t){e.$set(e.courseData,"endTime",t)},expression:"courseData.endTime"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitAdd}},[e._v("确 定")])],1)],1)],1)},o=[],s=(a(4114),a(5067)),r={data(){return{tableData:[],dialogFormVisible:!1,dialogFormVisible2:!1,courseData:{},total:0,pageSize:3,start:1,uploadHeaders:{}}},mounted(){console.log("Classes 组件已加载");const e=localStorage.getItem("token");e&&(s.A.defaults.headers.common["token"]=e,this.uploadHeaders={token:e},this.loadTableData())},methods:{loadTableData(){s.A.get("/classes",{params:{start:this.start,pageSize:this.pageSize}}).then((e=>{this.tableData=e.data.data.rows,this.total=e.data.data.total})).catch((e=>{console.error("网络请求失败：",e),this.$message.error("网络请求失败，请检查网络连接或联系管理员")}))},goToCourseStudent(e,t){localStorage.setItem("classesId",e),localStorage.setItem("classesName",t),this.$router.push("student")},handleCurrentChange(e){this.start=e,this.loadTableData()},changeCourse(e){this.dialogFormVisible=!0,this.courseData=e},submitChange(){s.A.put("/classes",this.courseData,{headers:{token:localStorage.getItem("token")}}).then((e=>{1==e.data.code?(alert("修改成功"),this.dialogFormVisible=!1):alert("修改失败"+e.data.msg)})),this.dialogFormVisible=!1},deleteCourse(e){s.A.delete("/classes/"+e,{headers:{token:localStorage.getItem("token")}}).then((e=>{1==e.data.code?alert("删除成功"):alert("删除失败"+e.data.msg)}))},addCourse(){this.dialogFormVisible2=!0},submitAdd(){s.A.post("/classes",this.courseData,{headers:{token:localStorage.getItem("token")}}).then((e=>{1==e.data.code?(alert("增加成功"),this.dialogFormVisible2=!1):alert("增加失败"+e.data.msg)}))}}},i=r,n=a(1656),c=(0,n.A)(i,l,o,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=617.98c0e6da.js.map