"use strict";(self["webpackChunkdeepface_front"]=self["webpackChunkdeepface_front"]||[]).push([[927],{5927:function(e,r,t){t.r(r),t.d(r,{default:function(){return c}});var a=function(){var e=this,r=e._self._c;return r("div",{staticClass:"registerBody"},[r("el-form",{ref:"registerForm",staticClass:"register-box",attrs:{model:e.registerForm,width:" 80px"}},[r("h3",{staticClass:"register-title"},[e._v("账号注册")]),r("el-form-item",{attrs:{label:"账号",prop:"username",rules:e.rules.username}},[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{type:"text",placeholder:" 请输入用户名"},on:{blur:function(r){return e.validate("username")}},model:{value:e.registerForm.username,callback:function(r){e.$set(e.registerForm,"username",r)},expression:"registerForm.username"}})],1)],1),r("el-form-item",{attrs:{label:"密码",prop:"password",rules:e.rules.password}},[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{type:"password",placeholder:" 请输入密码"},on:{blur:function(r){return e.validate("password")}},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}})],1)],1),r("el-form-item",{attrs:{label:"姓名",prop:"name",rules:e.rules.name}},[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{type:"text",placeholder:" 请输入姓名"},on:{blur:function(r){return e.validate("name")}},model:{value:e.registerForm.name,callback:function(r){e.$set(e.registerForm,"name",r)},expression:"registerForm.name"}})],1)],1),r("el-form-item",{attrs:{label:"邮件",prop:"email",rules:e.rules.email}},[r("el-col",{attrs:{span:20}},[r("el-input",{attrs:{type:"text",placeholder:" 请输入邮箱"},on:{blur:function(r){return e.validate("email")}},model:{value:e.registerForm.email,callback:function(r){e.$set(e.registerForm,"email",r)},expression:"registerForm.email"}})],1)],1),r("el-form-item",{attrs:{label:"验证码",prop:"vCode",rules:e.rules.vCode}},[r("el-col",{attrs:{span:10}},[r("el-input",{attrs:{type:"text",placeholder:" 请输入验证码",size:"small"},on:{blur:function(r){return e.validate("vCode")}},model:{value:e.registerForm.vCode,callback:function(r){e.$set(e.registerForm,"vCode",r)},expression:"registerForm.vCode"}})],1),r("el-col",{attrs:{span:8}},[r("el-image",{attrs:{src:e.vCodePic,fit:e.fit},on:{click:function(r){return e.loadVCode()}}})],1)],1),r("el-form-item",[r("div",{staticClass:"container"},[r("el-button",{staticClass:"left",attrs:{type:"primary"},on:{click:function(r){return e.goLogin()}}},[e._v("返回登录")]),r("el-button",{staticClass:"right",attrs:{type:"primary"},on:{click:function(r){return e.goRegister()}}},[e._v("确认注册")])],1)])],1)],1)},s=[],o=(t(4114),t(4603),t(7566),t(8721),t(5067)),l={data(){return{registerForm:{id:0,username:"",password:"",name:"",email:"",vCode:""},flag:0,uuid:"",rules:{username:[{validator:this.checkUsername,trigger:"blur"}],password:[{validator:this.checkPassword,trigger:"blur"}],name:[{validator:this.checkName,trigger:"blur"}],email:[{validator:this.checkEmail,trigger:"blur"}],vCode:[{validator:this.checkVCode,trigger:"blur"}]}}},mounted(){const e=localStorage.getItem("token");e&&(o.A.defaults.headers.common["token"]=e,this.getUuid())},methods:{getUuid(){o.A.get("/login/uuid").then((e=>{1==e.data.code?(this.uuid=e.data.data,this.loadVCode()):alert(e.data.msg)}))},loadVCode(){o.A.get("/vCode",{params:{length:4},responseType:"blob",headers:{Uuid:this.uuid}}).then((e=>{this.vCodePic=URL.createObjectURL(new Blob([e.data],{type:e.headers["content-type"]}))})).catch((e=>{console.error("获取验证码失败：",e)}))},goRegister(){this.$refs.registerForm.validate((e=>{e?o.A.post("/login/register",this.registerForm,{headers:{Uuid:this.uuid}}).then((e=>{this.flag=e.data.code,1==this.flag?(alert("注册成功"),this.$router.push("login")):alert("注册失败"+e.data.msg)})):alert("注册失败")}))},goLogin(){this.$router.push("login")},checkUsername(e,r,t){if(""==r)return t(new Error("账号不能为空"));t()},checkName(e,r,t){if(""==r)return t(new Error("姓名不能为空"));t()},checkPassword(e,r,t){""==r?t(new Error("请输入密码")):setTimeout((()=>{r.length<3?t(new Error("密码长度必须大于3")):t()}),500)},checkEmail(e,r,t){if(""===r)t(new Error("邮箱不能为空"));else{const e=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;setTimeout((()=>{e.test(r)?t():t(new Error("邮箱格式不正确"))}),500)}},checkVCode(e,r,t){if(""==r)return t(new Error("验证码不能为空"));t()},validate(e){this.$refs.registerForm.validateField(e)}}},i=l,n=t(1656),u=(0,n.A)(i,a,s,!1,null,null,null),c=u.exports}}]);
//# sourceMappingURL=927.4492a25f.js.map