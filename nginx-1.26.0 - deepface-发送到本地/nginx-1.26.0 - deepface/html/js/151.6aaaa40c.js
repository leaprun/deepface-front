"use strict";(self["webpackChunkdeepface_front"]=self["webpackChunkdeepface_front"]||[]).push([[151],{6151:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("el-container",{staticStyle:{height:"100vh",border:"1px solid #eee"}},[e("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)",height:"100%"},attrs:{width:"200px"}},[e("el-menu",{attrs:{"default-openeds":["1","3"]}},[e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-menu"}),t._v("班级管理")]),e("router-link",{attrs:{to:"classes"}},[e("el-menu-item",{attrs:{index:"1-1",route:"/student"}},[t._v("我的课程")])],1)],2),e("el-submenu",{attrs:{index:"3"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-s-grid"}),t._v("考勤签到")]),e("router-link",{attrs:{to:"attendance"}},[e("el-menu-item",{attrs:{index:"3-1"}},[t._v("开始考勤")])],1)],2)],1)],1),e("el-container",[e("el-main",{staticStyle:{height:"calc(100vh - 60px)"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addStudent}},[t._v("增加学生")])],1),e("el-col",{attrs:{span:6}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchStudent}},[t._v("搜索")])],1),e("el-col",{attrs:{span:6}},[e("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:8000/student/addBatch","on-success":t.handleSuccess,"on-error":t.handleError,"on-preview":t.handlePreview,headers:t.uploadHeaders,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,limit:1,"on-exceed":t.handleExceed,"file-list":t.fileList,accept:".pdf"}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("批量上传学生信息")]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传 PDF 文件")])],1)],1)],1),e("el-form",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"课程id"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.searchData.classesId,callback:function(e){t.$set(t.searchData,"classesId",e)},expression:"searchData.classesId"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"课程名称"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.searchData.classesName,callback:function(e){t.$set(t.searchData,"classesName",e)},expression:"searchData.classesName"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"学生id"}},[e("el-input",{model:{value:t.searchData.studentId,callback:function(e){t.$set(t.searchData,"studentId",e)},expression:"searchData.studentId"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"学生姓名"}},[e("el-input",{model:{value:t.searchData.studentName,callback:function(e){t.$set(t.searchData,"studentName",e)},expression:"searchData.studentName"}})],1)],1)],1)],1),e("el-table",{attrs:{data:t.tableData,height:"600px"}},[e("el-table-column",{attrs:{prop:"studentId",label:"学生id"}}),e("el-table-column",{attrs:{prop:"studentName",label:"学生姓名"}}),e("el-table-column",{attrs:{prop:"studentEmail",label:"学生邮箱"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.changeStudent(a.row)}}},[t._v(" 修改学生信息 ")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(e){return t.deleteStudent(a.row.studentId)}}},[t._v(" 删除学生信息 ")])]}}])})],1),e("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.searchData.pageSize,"current-page":t.searchData.start},on:{"current-change":t.handleCurrentChange}})],1)],1),e("el-dialog",{attrs:{title:"修改学生信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.studentData}},[e("el-form-item",{attrs:{label:"学生id"}},[e("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.studentData.studentId,callback:function(e){t.$set(t.studentData,"studentId",e)},expression:"studentData.studentId"}})],1),e("el-form-item",{attrs:{label:"学生姓名"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.studentData.studentName,callback:function(e){t.$set(t.studentData,"studentName",e)},expression:"studentData.studentName"}})],1),e("el-form-item",{attrs:{label:"学生邮箱"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.studentData.studentEmail,callback:function(e){t.$set(t.studentData,"studentEmail",e)},expression:"studentData.studentEmail"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitChange}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"新增学生",visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[e("el-form",{attrs:{model:t.studentData}},[e("el-form-item",{attrs:{label:"课程id"}},[e("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.studentData.classesId,callback:function(e){t.$set(t.studentData,"classesId",e)},expression:"studentData.classesId"}})],1),e("el-form-item",{attrs:{label:"课程名称"}},[e("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.studentData.classesName,callback:function(e){t.$set(t.studentData,"classesName",e)},expression:"studentData.classesName"}})],1),e("el-form-item",{attrs:{label:"学生id"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.studentData.studentId,callback:function(e){t.$set(t.studentData,"studentId",e)},expression:"studentData.studentId"}})],1),e("el-form-item",{attrs:{label:"学生姓名"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.studentData.studentName,callback:function(e){t.$set(t.studentData,"studentName",e)},expression:"studentData.studentName"}})],1),e("el-form-item",{attrs:{label:"学生邮箱"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.studentData.studentEmail,callback:function(e){t.$set(t.studentData,"studentEmail",e)},expression:"studentData.studentEmail"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitAdd}},[t._v("确 定")])],1)],1)],1)},l=[],o=(a(4114),a(5067)),n={data(){return{tableData:[],dialogFormVisible:!1,dialogFormVisible2:!1,studentData:{classesId:localStorage.getItem("classesId"),classesName:localStorage.getItem("classesName"),studentId:"",studentName:"",studentEmail:""},total:0,searchData:{pageSize:5,start:1,studentId:"",studentName:"",classesId:localStorage.getItem("classesId"),classesName:localStorage.getItem("classesName")},fileList:[],uploadHeaders:{}}},mounted(){console.log("student 组件已加载");const t=localStorage.getItem("token");t&&(o.A.defaults.headers.common["token"]=t,this.uploadHeaders={token:t},this.loadTableData())},methods:{loadTableData(){o.A.get("/student",{headers:{token:localStorage.getItem("token")},params:this.searchData}).then((t=>{this.tableData=t.data.data.rows,this.total=t.data.data.total})).catch((t=>{console.error("网络请求失败：",t),this.$message.error("网络请求失败，请检查网络连接或联系管理员")}))},searchStudent(){this.searchData.start=1,this.tableData=[],this.loadTableData()},handleCurrentChange(t){this.searchData.start=t,this.loadTableData()},changeStudent(t){this.dialogFormVisible=!0,this.studentData=t},submitChange(){o.A.put("/student",this.studentData,{headers:{token:localStorage.getItem("token")}}).then((t=>{1==t.data.code?alert("修改成功"):alert("修改失败"+t.data.msg)})),this.dialogFormVisible=!1},deleteStudent(t){o.A.delete("/student/"+t+"&"+localStorage.getItem("classesId"),{headers:{token:localStorage.getItem("token")}}).then((t=>{1==t.data.code?(alert("删除成功"),location.reload()):alert("删除失败"+t.data.msg)}))},addStudent(){this.dialogFormVisible2=!0},submitAdd(){o.A.post("/student/add",this.studentData,{headers:{token:localStorage.getItem("token")}}).then((t=>{1==t.data.code?alert("增加成功"):alert("增加失败"+t.data.msg)}))},handleSuccess(t,e){console.log("文件上传成功",t),console.log("文件信息",e);const a=e.name,s=t.url||e.url;this.fileList.push({name:a,url:s}),this.$message.success("文件上传成功")},handleError(t){console.error("文件上传失败",t),this.$message.error("文件上传失败，请检查网络连接或联系管理员")},handleRemove(t){console.log("删除文件",t)},handlePreview(t){console.log("预览文件",t)},handleExceed(t,e){this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${t.length} 个文件，共选择了 ${t.length+e.length} 个文件`)},beforeRemove(t){return this.$confirm(`确定移除 ${t.name}？`)}}},r=n,d=a(1656),i=(0,d.A)(r,s,l,!1,null,null,null),u=i.exports}}]);
//# sourceMappingURL=151.6aaaa40c.js.map