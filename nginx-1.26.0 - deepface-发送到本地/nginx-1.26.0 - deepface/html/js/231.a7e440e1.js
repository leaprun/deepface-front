"use strict";(self["webpackChunkdeepface_front"]=self["webpackChunkdeepface_front"]||[]).push([[231],{2231:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var o=function(){var t=this,e=t._self._c;return e("el-container",{staticStyle:{height:"100vh",border:"1px solid #eee"}},[e("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)",height:"100%"},attrs:{width:"200px"}},[e("el-menu",{attrs:{"default-openeds":["1","3"]}},[e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-menu"}),t._v("班级管理")]),e("router-link",{attrs:{to:"classes"}},[e("el-menu-item",{attrs:{index:"1-1"}},[t._v("我的班级")])],1)],2),e("el-submenu",{attrs:{index:"3"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-s-grid"}),t._v("考勤签到")]),e("router-link",{attrs:{to:"attendance"}},[e("el-menu-item",{attrs:{index:"3-1"}},[t._v("开始考勤")])],1)],2)],1)],1),e("el-container",[e("el-main",{staticStyle:{height:"calc(100vh - 60px)"}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addCourse}},[t._v("新增课程")]),e("el-table",{attrs:{data:t.tableData,height:"600px"}},[e("el-table-column",{attrs:{prop:"id",label:"课程id"}}),e("el-table-column",{attrs:{prop:"name",label:"课程名称"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.goToCourseStudent(a.row.id,a.row.name)}}},[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{prop:"startTime",label:"开始时间"}}),e("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.changeCourse(a.row)}}},[t._v(" 修改课程 ")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(e){return t.deleteCourse(a.row.id)}}},[t._v(" 删除课程 ")])]}}])})],1),e("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.start},on:{"current-change":t.handleCurrentChange}})],1)],1),e("el-dialog",{attrs:{title:"修改课程",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.courseData}},[e("el-form-item",{attrs:{label:"课程名称"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.courseData.name,callback:function(e){t.$set(t.courseData,"name",e)},expression:"courseData.name"}})],1),e("el-form-item",{attrs:{label:"开始时间"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.courseData.startTime,callback:function(e){t.$set(t.courseData,"startTime",e)},expression:"courseData.startTime"}})],1),e("el-form-item",{attrs:{label:"结束时间"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.courseData.endTime,callback:function(e){t.$set(t.courseData,"endTime",e)},expression:"courseData.endTime"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitChange}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"增加课程",visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[e("el-form",{attrs:{model:t.courseData}},[e("el-form-item",{attrs:{label:"课程名称"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.courseData.name,callback:function(e){t.$set(t.courseData,"name",e)},expression:"courseData.name"}})],1),e("el-form-item",{attrs:{label:"开始时间"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.courseData.startTime,callback:function(e){t.$set(t.courseData,"startTime",e)},expression:"courseData.startTime"}})],1),e("el-form-item",{attrs:{label:"结束时间"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.courseData.endTime,callback:function(e){t.$set(t.courseData,"endTime",e)},expression:"courseData.endTime"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitAdd}},[t._v("确 定")])],1)],1)],1)},l=[],s=(a(4114),a(5067)),r={data(){return{tableData:[],dialogFormVisible:!1,dialogFormVisible2:!1,courseData:{},total:0,pageSize:3,start:1}},mounted(){console.log("Classes 组件已加载");const t=localStorage.getItem("token");t&&(s.A.defaults.headers.common["token"]=t,this.loadTableData())},methods:{loadTableData(){s.A.get("/classes",{params:{start:this.start,pageSize:this.pageSize}}).then((t=>{this.tableData=t.data.data.rows,this.total=t.data.data.total})).catch((t=>{console.error("网络请求失败：",t),this.$message.error("网络请求失败，请检查网络连接或联系管理员")}))},goToCourseStudent(t,e){localStorage.setItem("classesId",t),localStorage.setItem("classesName",e),this.$router.push("student")},handleCurrentChange(t){this.start=t,this.loadTableData()},changeCourse(t){this.dialogFormVisible=!0,this.courseData=t},submitChange(){s.A.put("/classes",this.courseData,{headers:{token:localStorage.getItem("token")}}).then((t=>{1==t.data.code?(alert("修改成功"),this.dialogFormVisible=!1):alert("修改失败"+t.data.msg)})),this.dialogFormVisible=!1},deleteCourse(t){s.A.delete("/classes/"+t,{headers:{token:localStorage.getItem("token")}}).then((t=>{1==t.data.code?alert("删除成功"):alert("删除失败"+t.data.msg)}))},addCourse(){this.dialogFormVisible2=!0},submitAdd(){s.A.post("/classes",this.courseData,{headers:{token:localStorage.getItem("token")}}).then((t=>{1==t.data.code?(alert("增加成功"),this.dialogFormVisible2=!1):alert("增加失败"+t.data.msg)}))}}},i=r,n=a(1656),c=(0,n.A)(i,o,l,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=231.a7e440e1.js.map